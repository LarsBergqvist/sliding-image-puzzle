(this["webpackJsonpsliding-image-puzzle"]=this["webpackJsonpsliding-image-puzzle"]||[]).push([[0],{19:function(e,t,r){},26:function(e,t,r){"use strict";r.r(t);var i=r(1),n=r(6),c=r.n(n),s=(r(19),function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,29)).then((function(t){var r=t.getCLS,i=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),i(e),n(e),c(e),s(e)}))}),a="INIT_GAME",o="MOVE_TILE",u="HIGHSCORE_LIST_LOADED",h="NAME_CHANGED",d="NAME_SUBMITTED",l="HIGHSCORE_LIST_SAVED";function m(e,t,r){return{type:a,gameId:e,imageNumber:t,doShuffling:r}}var b=r(12),g=r.n(b);function f(e,t){var r=function(e,t){for(var r=0,i=0;i<e*e-1;i++)for(var n=i+1;n<e*e;n++)t[n]&&t[i]&&t[i]>t[n]&&r++;return r}(e,t);if(1&e)return!(1&r);var i=function(e,t){var r=t.findIndex((function(e){return 0===e})),i=Math.floor(r/e);return e-i}(e,t);return 1&i?!(1&r):1&r}function j(e,t){for(var r=[],i=0;i<e*e;i++)r[i]=i+1;if(r[e*e-1]=0,t)for(var n=!1;!n;)n=f(e,r=g()(r));return r}function p(e,t,r){var i=e.findIndex((function(e){return e===t})),n=e[i],c=e.findIndex((function(e){return e===r})),s=e[c];return e[c]=n,e[i]=s,e}function x(e){for(var t=0;t<e.length;t++)if(0!==e[t]&&e[t]!==t+1)return!1;return!0}function v(e,t,r){var i=r.findIndex((function(e){return e===t})),n=Math.floor(i/e);if(n<e-1&&0===r[i+e])return!0;if(n>0&&0===r[i-e])return!0;var c=i%e;return c<e-1&&0===r[i+1]||c>0&&0===r[i-1]}function O(e,t,r,i){var n=i.results.map((function(e){return{id:e.id,score:e.score,time:isNaN(Date.parse(e.utcDateTime))?0:Date.parse(e.utcDateTime)}}));n.push({id:e,score:r,time:t}),n.sort((function(e,t){return e.score-t.score||t.time-e.time}));var c=n.findIndex((function(t){return t.id===e}));return c>-1&&c+1<=i.maxSize?c:-1}var S=[{name:"3x3 Puzzle",size:3,highscorelistid:"60e30fa5b9610740690ab199"},{name:"4x4 Puzzle",size:4,highscorelistid:"60e30faeb9610740690ab19a"},{name:"5x5 Puzzle",size:5,highscorelistid:"60e30fb3b9610740690ab19b"}],N=r(28),I={moves:0,gameComplete:!1,imageNumber:1,tiles:[],size:void 0,gameId:void 0,gameName:void 0,highScoreList:void 0,highScorePosition:-1,userName:void 0,userId:void 0,highScoreListSaved:!1,nameSubmitted:!1};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return Object.assign({},I,{gameId:t.gameId,size:S[t.gameId].size,gameName:S[t.gameId].name,imageNumber:t.imageNumber,highScoreListId:S[t.gameId].highscorelistid,tiles:j(S[t.gameId].size,t.doShuffling),nameSubmitted:!1});case o:if(0===t.id)return e;if(e.gameComplete)return e;if(t.id<0||t.id>e.size*e.size-1)return e;if(!v(e.size,t.id,e.tiles))return e;var r=e.tiles.map((function(e){return e})),i=p(r,0,t.id),n=x(i);if(n&&e.highScoreList){var c=Object(N.a)(),s=Date.now(),m=O(c,s,e.moves+1,e.highScoreList);return m>-1?Object.assign({},e,{highScorePosition:m+1,gameComplete:n,moves:e.moves+1,userId:c,tiles:i}):Object.assign({},e,{highScorePosition:m+1,gameComplete:n,moves:e.moves+1,tiles:i})}return Object.assign({},e,{gameComplete:n,moves:e.moves+1,tiles:i});case u:return Object.assign({},e,{highScoreList:t.highScoreList});case h:return Object.assign({},e,{userName:t.name});case l:return Object.assign({},e,{highScoreListSaved:!0,highScoreList:t.highScoreList});case d:return Object.assign({},e,{nameSubmitted:!0});default:return e}},w=r(3),z=r.n(w),k=r(4);function C(e,t){return y.apply(this,arguments)}function y(){return(y=Object(k.a)(z.a.mark((function e(t,r){var i,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=="https://highscore-service-lb-api.azurewebsites.net".length){e.next=2;break}return e.abrupt("return");case 2:return i="".concat("https://highscore-service-lb-api.azurewebsites.net","/highscore-lists/").concat(r().highScoreListId),e.prev=3,e.next=6,T(i);case 6:n=e.sent,t({type:u,highScoreList:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Network request failed");case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function E(e,t){return P.apply(this,arguments)}function P(){return(P=Object(k.a)(z.a.mark((function e(t,r){var i,n,c,s,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=="https://highscore-service-lb-api.azurewebsites.net".length){e.next=2;break}return e.abrupt("return");case 2:if(i="".concat("https://highscore-service-lb-api.azurewebsites.net","/highscore-lists/").concat(r().highScoreListId,"/game-results"),(n=r()).userName&&0!==n.userName.length&&!n.nameSubmitted){e.next=6;break}return e.abrupt("return");case 6:return t({type:d}),c={userName:n.userName,score:n.moves,id:n.userId},e.prev=8,e.next=11,M(i,c);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),console.error("Network request failed3"),e.abrupt("return");case 17:return s="".concat("https://highscore-service-lb-api.azurewebsites.net","/highscore-lists/").concat(r().highScoreListId),e.next=20,T(s);case 20:a=e.sent,t({type:l,highScoreList:a});case 22:case"end":return e.stop()}}),e,null,[[8,13]])})))).apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return(D=Object(k.a)(z.a.mark((function e(t){var r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{headers:{ApiKey:"".concat("fe9f18bf-2d7b-4bdb-954e-4cfd83d66217")}});case 3:if((r=e.sent).ok){e.next=6;break}throw Error("Network request failed");case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),Error("Network request failed");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function M(e,t){return _.apply(this,arguments)}function _(){return(_=Object(k.a)(z.a.mark((function e(t,r){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",headers:{"Content-Type":"application/json",ApiKey:"".concat("fe9f18bf-2d7b-4bdb-954e-4cfd83d66217")},body:JSON.stringify(r)});case 3:if(e.sent.ok){e.next=6;break}throw Error("Network request failed");case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),Error("Network request failed");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var G=r(2),A=r(7),F=r(13),H=(r(5),r(14)),q=r(0),R=Object(G.b)((function(e){return{highScorePosition:e.highScorePosition,highScoreList:e.highScoreList,nameSubmitted:e.nameSubmitted}}),(function(e){return{onSubmitNameToHighScore:function(){e(E)},onNameChanged:function(t){e(function(e){return{type:h,name:e}}(t))}}}))((function(e){var t=Object(i.useState)(""),r=Object(H.a)(t,2),n=r[0],c=r[1];return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{children:["YOU MADE IT TO #",e.highScorePosition," on the leaderboard!"]}),"Enter your name:",Object(q.jsx)("input",{type:"text",minLength:"3",maxLength:"25",required:!0,onChange:function(t){c(t.target.value),e.onNameChanged(t.target.value)},disabled:e.nameSubmitted}),Object(q.jsx)("div",{children:n.length>=3&&n.length<=25&&Object(q.jsx)("button",{className:"game-button",onClick:function(){return e.onSubmitNameToHighScore(n)},disabled:e.nameSubmitted,children:"Submit"})})]})})),B=function(e){if(!e.highScoreList)return Object(q.jsx)(q.Fragment,{});var t=e.highScoreList.results.map((function(t,r){var i="";return e.userId&&t.id===e.userId&&(i="user-row-in-highscore"),Object(q.jsxs)("tr",{className:i,children:[Object(q.jsxs)("td",{children:["#",r+1]}),Object(q.jsx)("td",{children:t.userName}),Object(q.jsx)("td",{className:"date-column",children:new Date(t.utcDateTime).toLocaleDateString()}),Object(q.jsx)("td",{children:t.score})]},r+1)}));return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{children:[Object(q.jsx)("h3",{children:e.highScoreList.name}),Object(q.jsxs)("table",{className:"highscoretable",children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Position"}),Object(q.jsx)("th",{children:"Name"}),Object(q.jsx)("th",{className:"date-column",children:"Date"}),Object(q.jsx)("th",{children:e.highScoreList.unit})]})}),Object(q.jsx)("tbody",{children:t})]})]})})},J=Object(G.b)((function(e){return{moves:e.moves,gameComplete:e.gameComplete,highScorePosition:e.highScorePosition,highScoreListSaved:e.highScoreListSaved,highScoreList:e.highScoreList,userId:e.userId}}))((function(e){return e.gameComplete?Object(q.jsxs)("div",{className:"game-status",children:[Object(q.jsx)("div",{children:Object(q.jsx)("b",{children:"GAME COMPLETE!"})}),Object(q.jsxs)("div",{children:["You used ",e.moves," moves"]}),e.highScorePosition>0&&!e.highScoreListSaved&&Object(q.jsx)(R,{}),e.highScorePosition>0&&e.highScoreListSaved&&Object(q.jsx)(B,{highScoreList:e.highScoreList,userId:e.userId})]}):Object(q.jsxs)("div",{className:"game-status",children:["Moves: ",Object(q.jsx)("b",{children:e.moves}),Object(q.jsx)("div",{className:"game-instructions",children:Object(q.jsx)("div",{children:"Click on the tile that should be moved"})})]})})),U=r(11),V=function(e,t,r,i,n){if(0===e)return{};var c=e-1,s=-Math.floor(c/t)*r,a=c<t?-c*r:-c%t*r,o="".concat(window.location.href,"/images/img").concat(n,".jpg"),u={backgroundPosition:"left ".concat(a,"px top ").concat(s,"px"),backgroundImage:"url('".concat(o,"')")};return i&&(u=Object(U.a)(Object(U.a)({},u),{},{outline:"1px solid white",outlineOffset:"-10px"})),u},W=function(e){var t=e.id,r=e.size,i=e.tileWidth,n=e.isCorrectPos,c=e.imageNumber,s=e.onClick;return Object(q.jsx)("div",{className:"tile",style:V(t,r,i,n,c),onClick:function(){return s(t)}})},K=Object(G.b)((function(e){return{imageNumber:e.imageNumber,tiles:e.tiles,size:e.size}}),(function(e){return{onTileClicked:function(t){e(function(e){return{type:o,id:e}}(t))}}}))((function(e){var t=300/e.size,r={width:"".concat(e.size*t,"px")},i={gridTemplateColumns:"repeat(".concat(e.size,",").concat(t,"px)")};return Object(q.jsx)("div",{className:"tile-wrapper",style:r,children:Object(q.jsx)("div",{className:"tile-container",style:i,children:e.tiles.map((function(r,i){return Object(q.jsx)(W,{id:r,isCorrectPos:r===i+1,imageNumber:e.imageNumber,onClick:e.onTileClicked,tileWidth:t,size:e.size},i)}))})})})),X=Object(G.b)((function(e){return{imageNumber:e.imageNumber}}))((function(e){var t="".concat(window.location.href,"/images/img").concat(e.imageNumber,".jpg"),r=300/e.size,i=e.size*r,n={maxWidth:i+"px",maxHeight:i+"px"};return Object(q.jsx)("div",{className:"full-image",style:n,children:Object(q.jsx)("img",{src:"".concat(t),draggable:"false",alt:"Full image"})})})),Y=function(e){return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("header",{className:"game-header",children:Object(q.jsx)("div",{className:"game-title",children:"Sliding Image Puzzle"})}),Object(q.jsx)("div",{children:Object(q.jsx)("h2",{children:e.gameName})})]})},Q=function(e){return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("button",{className:"game-button",onClick:function(){return e.onInitGame(0)},children:"Restart 3x3"}),Object(q.jsx)("button",{className:"game-button",onClick:function(){return e.onInitGame(1)},children:"Restart 4x4"}),Object(q.jsx)("button",{className:"game-button",onClick:function(){return e.onInitGame(2)},children:"Restart 5x5"})]})},Z=Object(G.b)((function(e){return{gameName:e.gameName,highScoreList:e.highScoreList}}),(function(e){return{onInitGame:function(t){e(m(t,Math.floor(18*Math.random())+1,!0)),e(C)}}}))((function(e){return Object(q.jsxs)("div",{className:"game",children:[Object(q.jsx)(Y,{gameName:e.gameName}),Object(q.jsx)(J,{}),Object(q.jsx)(K,{}),Object(q.jsx)(Q,{onInitGame:e.onInitGame}),Object(q.jsx)(X,{}),Object(q.jsx)(B,{highScoreList:e.highScoreList})]})})),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.b,ee=Object(A.c)(L,$(Object(A.a)(F.a)));ee.dispatch(m(0,Math.floor(18*Math.random())+1,!0)),ee.dispatch(C),c.a.render(Object(q.jsx)(G.a,{store:ee,children:Object(q.jsx)(Z,{})}),document.getElementById("root")),s()},5:function(e,t,r){}},[[26,1,2]]]);
//# sourceMappingURL=main.abdcafe2.chunk.js.map