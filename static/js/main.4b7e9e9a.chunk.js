(this["webpackJsonpsliding-image-puzzle"]=this["webpackJsonpsliding-image-puzzle"]||[]).push([[0],{19:function(e,t,r){},26:function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(6),c=r.n(i),s=(r(19),function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,29)).then((function(t){var r=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),i(e),c(e),s(e)}))}),a="INIT_GAME",o="MOVE_TILE",u="HIGHSCORE_LIST_LOADED",h="NAME_CHANGED",l="HIGHSCORE_LIST_SAVED";function d(e,t,r){return{type:a,gameId:e,imageNumber:t,doShuffling:r}}var m=r(12),g=r.n(m);function b(e,t){var r=function(e,t){for(var r=0,n=0;n<e*e-1;n++)for(var i=n+1;i<e*e;i++)t[i]&&t[n]&&t[n]>t[i]&&r++;return r}(e,t);return 1&e||1&function(e,t){var r=t.findIndex((function(e){return 0===e})),n=Math.floor(r/e);return e-n}(e,t)?!(1&r):1&r}function f(e,t){for(var r=[],n=0;n<e*e;n++)r[n]=n+1;if(r[e*e-1]=0,t)for(var i=!1;!i;)i=b(e,r=g()(r));return r}function j(e,t,r){var n=e.findIndex((function(e){return e===t})),i=e[n],c=e.findIndex((function(e){return e===r})),s=e[c];return e[c]=i,e[n]=s,e}function p(e){for(var t=0;t<e.length;t++)if(0!==e[t]&&e[t]!==t+1)return!1;return!0}function x(e,t,r){var n=r.findIndex((function(e){return e===t})),i=Math.floor(n/e);if(i<e-1&&0===r[n+e])return!0;if(i>0&&0===r[n-e])return!0;var c=n%e;return c<e-1&&0===r[n+1]||c>0&&0===r[n-1]}function v(e,t,r,n){var i=n.results.map((function(e){return{id:e.id,score:e.score,time:isNaN(Date.parse(e.utcDateTime))?0:Date.parse(e.utcDateTime)}}));i.push({id:e,score:r,time:t}),i.sort((function(e,t){return e.score-t.score||t.time-e.time}));var c=i.findIndex((function(t){return t.id===e}));return c>-1&&c+1<=n.maxSize?c:-1}var O=[{name:"3x3 Puzzle",size:3,highscorelistid:"60e30fa5b9610740690ab199"},{name:"4x4 Puzzle",size:4,highscorelistid:"60e30faeb9610740690ab19a"},{name:"5x5 Puzzle",size:5,highscorelistid:"60e30fb3b9610740690ab19b"}],S=r(28),N={moves:0,gameComplete:!1,imageNumber:1,tiles:[],size:void 0,gameId:void 0,gameName:void 0,highScoreList:void 0,highScorePosition:-1,userName:void 0,userId:void 0,highScoreListSaved:!1};var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return Object.assign({},N,{gameId:t.gameId,size:O[t.gameId].size,gameName:O[t.gameId].name,imageNumber:t.imageNumber,highScoreListId:O[t.gameId].highscorelistid,tiles:f(O[t.gameId].size,t.doShuffling)});case o:if(0===t.id)return e;if(e.gameComplete)return e;if(t.id<0||t.id>e.size*e.size-1)return e;if(!x(e.size,t.id,e.tiles))return e;var r=e.tiles.map((function(e){return e})),n=j(r,0,t.id),i=p(n);if(i&&e.highScoreList){var c=Object(S.a)(),s=Date.now(),d=v(c,s,e.moves+1,e.highScoreList);return d>-1?Object.assign({},e,{highScorePosition:d+1,gameComplete:i,moves:e.moves+1,userId:c,tiles:n}):Object.assign({},e,{highScorePosition:d+1,gameComplete:i,moves:e.moves+1,tiles:n})}return Object.assign({},e,{gameComplete:i,moves:e.moves+1,tiles:n});case u:return Object.assign({},e,{highScoreList:t.highScoreList});case h:return Object.assign({},e,{userName:t.name});case l:return Object.assign({},e,{highScoreListSaved:!0,highScoreList:t.highScoreList});default:return e}},L=r(3),w=r.n(L),z=r(4);function k(e,t){return C.apply(this,arguments)}function C(){return(C=Object(z.a)(w.a.mark((function e(t,r){var n,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=="https://highscore-service-lb-api.azurewebsites.net".length){e.next=2;break}return e.abrupt("return");case 2:return n="".concat("https://highscore-service-lb-api.azurewebsites.net","/highscore-lists/").concat(r().highScoreListId),e.prev=3,e.next=6,P(n);case 6:i=e.sent,t({type:u,highScoreList:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Network request failed");case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function y(e,t){return E.apply(this,arguments)}function E(){return(E=Object(z.a)(w.a.mark((function e(t,r){var n,i,c,s,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=="https://highscore-service-lb-api.azurewebsites.net".length){e.next=2;break}return e.abrupt("return");case 2:if(n="".concat("https://highscore-service-lb-api.azurewebsites.net","/highscore-lists/").concat(r().highScoreListId,"/game-results"),(i=r()).userName&&0!==i.userName.length){e.next=6;break}return e.abrupt("return");case 6:return c={userName:i.userName,score:i.moves,id:i.userId},e.prev=7,e.next=10,D(n,c);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(7),console.error("Network request failed3"),e.abrupt("return");case 16:return s="".concat("https://highscore-service-lb-api.azurewebsites.net","/highscore-lists/").concat(r().highScoreListId),e.next=19,P(s);case 19:a=e.sent,t({type:l,highScoreList:a});case 21:case"end":return e.stop()}}),e,null,[[7,12]])})))).apply(this,arguments)}function P(e){return T.apply(this,arguments)}function T(){return(T=Object(z.a)(w.a.mark((function e(t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{headers:{ApiKey:"".concat("fe9f18bf-2d7b-4bdb-954e-4cfd83d66217")}});case 3:if((r=e.sent).ok){e.next=6;break}throw Error("Network request failed");case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),Error("Network request failed");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function D(e,t){return M.apply(this,arguments)}function M(){return(M=Object(z.a)(w.a.mark((function e(t,r){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",headers:{"Content-Type":"application/json",ApiKey:"".concat("fe9f18bf-2d7b-4bdb-954e-4cfd83d66217")},body:JSON.stringify(r)});case 3:if(e.sent.ok){e.next=6;break}throw Error("Network request failed");case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),Error("Network request failed");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var _=r(2),G=r(7),F=r(13),A=(r(5),r(14)),H=r(0),q=Object(_.b)((function(e){return{highScorePosition:e.highScorePosition,highScoreList:e.highScoreList}}),(function(e){return{onSubmitNameToHighScore:function(){e(y)},onNameChanged:function(t){e(function(e){return{type:h,name:e}}(t))}}}))((function(e){var t=Object(n.useState)(""),r=Object(A.a)(t,2),i=r[0],c=r[1];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("div",{children:["YOU MADE IT TO #",e.highScorePosition," on the leaderboard!"]}),"Enter your name:",Object(H.jsx)("input",{type:"text",minLength:"3",maxLength:"25",required:!0,onChange:function(t){c(t.target.value),e.onNameChanged(t.target.value)}}),Object(H.jsx)("div",{children:i.length>=3&&i.length<=25&&Object(H.jsx)("button",{className:"game-button",onClick:function(){return e.onSubmitNameToHighScore(i)},children:"Submit"})})]})})),R=function(e){if(!e.highScoreList)return Object(H.jsx)(H.Fragment,{});var t=e.highScoreList.results.map((function(t,r){var n="";return e.userId&&t.id===e.userId&&(n="user-row-in-highscore"),Object(H.jsxs)("tr",{className:n,children:[Object(H.jsxs)("td",{children:["#",r+1]}),Object(H.jsx)("td",{children:t.userName}),Object(H.jsx)("td",{className:"date-column",children:new Date(t.utcDateTime).toLocaleDateString()}),Object(H.jsx)("td",{children:t.score})]},r+1)}));return Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)("div",{children:[Object(H.jsx)("h3",{children:e.highScoreList.name}),Object(H.jsxs)("table",{className:"highscoretable",children:[Object(H.jsx)("thead",{children:Object(H.jsxs)("tr",{children:[Object(H.jsx)("th",{children:"Position"}),Object(H.jsx)("th",{children:"Name"}),Object(H.jsx)("th",{className:"date-column",children:"Date"}),Object(H.jsx)("th",{children:e.highScoreList.unit})]})}),Object(H.jsx)("tbody",{children:t})]})]})})},J=Object(_.b)((function(e){return{moves:e.moves,gameComplete:e.gameComplete,highScorePosition:e.highScorePosition,highScoreListSaved:e.highScoreListSaved,highScoreList:e.highScoreList,userId:e.userId}}))((function(e){return e.gameComplete?Object(H.jsxs)("div",{className:"game-status",children:[Object(H.jsx)("div",{children:Object(H.jsx)("b",{children:"GAME COMPLETE!"})}),Object(H.jsxs)("div",{children:["You used ",e.moves," moves"]}),e.highScorePosition>0&&!e.highScoreListSaved&&Object(H.jsx)(q,{}),e.highScorePosition>0&&e.highScoreListSaved&&Object(H.jsx)(R,{highScoreList:e.highScoreList,userId:e.userId})]}):Object(H.jsxs)("div",{className:"game-status",children:["Moves: ",Object(H.jsx)("b",{children:e.moves}),Object(H.jsx)("div",{className:"game-instructions",children:Object(H.jsx)("div",{children:"Click on the tile that should be moved"})})]})})),V=r(11),W=function(e,t,r,n,i){if(0===e)return{};var c=e-1,s=-Math.floor(c/t)*r,a=c<t?-c*r:-c%t*r,o="".concat(window.location.href,"/images/img").concat(i,".jpg"),u={backgroundPosition:"left ".concat(a,"px top ").concat(s,"px"),backgroundImage:"url('".concat(o,"')")};return n&&(u=Object(V.a)(Object(V.a)({},u),{},{outline:"1px solid white",outlineOffset:"-10px"})),u},B=function(e){var t=e.id,r=e.size,n=e.tileWidth,i=e.isCorrectPos,c=e.imageNumber,s=e.onClick;return Object(H.jsx)("div",{className:"tile",style:W(t,r,n,i,c),onClick:function(){return s(t)}})},K=Object(_.b)((function(e){return{imageNumber:e.imageNumber,tiles:e.tiles,size:e.size}}),(function(e){return{onTileClicked:function(t){e(function(e){return{type:o,id:e}}(t))}}}))((function(e){var t=300/e.size,r={width:"".concat(e.size*t,"px")},n={gridTemplateColumns:"repeat(".concat(e.size,",").concat(t,"px)")};return Object(H.jsx)("div",{className:"tile-wrapper",style:r,children:Object(H.jsx)("div",{className:"tile-container",style:n,children:e.tiles.map((function(r,n){return Object(H.jsx)(B,{id:r,isCorrectPos:r===n+1,imageNumber:e.imageNumber,onClick:e.onTileClicked,tileWidth:t,size:e.size},n)}))})})})),U=Object(_.b)((function(e){return{imageNumber:e.imageNumber}}))((function(e){var t="".concat(window.location.href,"/images/img").concat(e.imageNumber,".jpg"),r=300/e.size,n=e.size*r,i={maxWidth:n+"px",maxHeight:n+"px"};return Object(H.jsx)("div",{className:"full-image",style:i,children:Object(H.jsx)("img",{src:"".concat(t),draggable:"false",alt:"Full image"})})})),X=function(e){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("header",{className:"game-header",children:Object(H.jsx)("div",{className:"game-title",children:"Sliding Image Puzzle"})}),Object(H.jsx)("div",{children:Object(H.jsx)("h2",{children:e.gameName})})]})},Y=function(e){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("button",{className:"game-button",onClick:function(){return e.onInitGame(0)},children:"Restart 3x3"}),Object(H.jsx)("button",{className:"game-button",onClick:function(){return e.onInitGame(1)},children:"Restart 4x4"}),Object(H.jsx)("button",{className:"game-button",onClick:function(){return e.onInitGame(2)},children:"Restart 5x5"})]})},Q=Object(_.b)((function(e){return{gameName:e.gameName,highScoreList:e.highScoreList}}),(function(e){return{onInitGame:function(t){e(d(t,Math.floor(18*Math.random())+1,!0)),e(k)}}}))((function(e){return Object(H.jsxs)("div",{className:"game",children:[Object(H.jsx)(X,{gameName:e.gameName}),Object(H.jsx)(J,{}),Object(H.jsx)(K,{}),Object(H.jsx)(Y,{onInitGame:e.onInitGame}),Object(H.jsx)(U,{}),Object(H.jsx)(R,{highScoreList:e.highScoreList})]})})),Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.b,$=Object(G.c)(I,Z(Object(G.a)(F.a)));$.dispatch(d(0,Math.floor(18*Math.random())+1,!0)),$.dispatch(k),c.a.render(Object(H.jsx)(_.a,{store:$,children:Object(H.jsx)(Q,{})}),document.getElementById("root")),s()},5:function(e,t,r){}},[[26,1,2]]]);
//# sourceMappingURL=main.4b7e9e9a.chunk.js.map